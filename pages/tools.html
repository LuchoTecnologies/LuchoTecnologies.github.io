<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="/assets/styles/page.css"> 
    <link rel="stylesheet" type="text/css" href="../assets/styles/page.css"> <!-- This is for development -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/icon.png') }}">
    <title>Lucho Tecnologies</title>
</head>


<body>
    <header>
        <nav class="topnav">
            <h1 class="header-title">Lucho Tecnologies</h1>
            <img src="../assets/images/logotext.png"
            alt = "Lucho Tecnologies"
            class="logo"
            />
        </nav>
        
        <!-- lol -->
        <nav>
            <ul>
                <li>
                    <a href="/">Inicio</a>
                </li>
                <li>
                    <a href="tools.html"><strong>Herramientas</strong></a>
                </li>
                <li>
                    <a href="portfolio.html">Portfolio</a>
                </li>
                <li>
                    <a href="apis.html">APIs</a>
                </li>
                <li>
                    <a href="about.html">Acerca</a>
                </li>
            </ul>
        </nav>
    </header>
    <article>
        <p style="color: #ff0000"><strong>Nota: Debido al cambio de host, es posible que algunas herramientas no fucionen</strong></p>
    </article>

    
    <article>
        <h1>Herramientas</h1>
        <p>Aqui hay alguna que otra cosa para hecharte un cable.</p>
    </article>
    <article>
        <h2>Juegos :D</h2>
        <p>Algunos juegos para matar el aburrimiento</p>

        <a href="games/boxhead.html">Boxhead</a>
    </article>
    <article>
        <h1>PasteTrash</h1>
        <h3>Cansado de andar mandandote enlaces y texto por whatsapp?</h3> 
        <p>Esta solucion un poco menos tediosa te permite crear una zona privada a la que podras acceder cuando quieras, con el poder de una palabra o frase clave.</p>
        
        <style>
            #dataContainer{
                display: none;
            }
            #postaccess{
                display: none;
            }
        </style>

        <div id="preaccess">
            <label for="keyIn">Clave:</label>
            <input type="text" id="keyIn" placeholder="Escribe la clave">
            <button id="pt_access" onclick="pt_access()">Acceder</button>
        </div>

        <div id="postaccess">
            <strong>
                <p id = "keyinfo">Clave: </p>
            </strong>
        </div>
        
        

        
        <div id="dataContainer">
            <p>Contenidos de tu PasteTrash:</p>
            <ul id="dataList" class="in-article">
                <li>Bla bla</li>
                <li>Bla bla bla bla</li>
                <li>Bla</li>
            </ul>

            <label for="dataIn">Añadir:</label>
            <input type="text" id="dataIn" placeholder="Mete aqui lo que quieras">
            <button id="pt_post" onclick="pt_submit()">Subir</button>
            <p class="little">(esta informacion es accesible por el administrador y cualquiera que tenga la clave. sube cosas a tu propio riesgo)</p>
            
        </div>

        <script>
            function pt_access(){
                const container = document.getElementById('dataContainer');                
                const preaccess = document.getElementById('preaccess');
                const keyIn = document.getElementById('keyIn');
                const keyinfo = document.getElementById('keyinfo');

                const postaccess = document.getElementById('postaccess');

                const sentKey = keyIn.value

                fetch('/loadpastetrash', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ key: sentKey })
                })
                .then(response => response.json()) // Procesa la respuesta en JSON
                .then(data => {
                    const dataList = document.getElementById('dataList');
                    dataList.innerHTML = ''; // Limpia la lista actual

                    data.listItems.forEach(item => {
                        const li = document.createElement('li');
                        li.textContent = item;
                        dataList.appendChild(li);
                    });
                    
                    container.style.display = 'block';
                    preaccess.style.display = 'none';
                    keyinfo.textContent = 'Clave: ' + keyIn.value;
                    postaccess.style.display = 'block';
                      
                })
                .catch(error => {
                    console.error('Error al cargar el paste trash:', error);
                    alert('Hubo un error al cargar el paste trash...');
                });

            }
            function pt_submit(){
                const keyIn = document.getElementById('keyIn');
                const dataIn = document.getElementById('dataIn');

                const sentKey = keyIn.value
                const submitData = dataIn.value


                fetch('/addpastetrash', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ key: sentKey , data: submitData})
                })
                .then(response => response.json()) // Procesa la respuesta en JSON
                .then(data => {
                    if(data.status != 'success'){
                        alert("Error al subir tu informacion, no se ha guardado.");
                    }else{
                        dataIn.value = '';
                        const dataList = document.getElementById('dataList');
                        dataList.innerHTML = ''; // Limpia la lista actual

                        data.listItems.forEach(item => {
                            const li = document.createElement('li');
                            li.textContent = item;
                            dataList.appendChild(li);
                        });
                    }
                })
                .catch(error => {
                    alert('Hubo un error al subir los datos');
                });
            }
        </script>
        

    </article>

    <article>
        <h1>Test Tool V1.0</h1>
        <p>Nada, simplemente envia un mensaje al servidor.</p>

        <label for="messageInput">Escribe tu mensaje:</label>
        <input type="text" id="messageInput" placeholder="Escribe algo aquí">
        <button id="sendButton">Enviar</button>

        <script>
            // Selecciona el botón y el campo de texto
            const sendButton = document.getElementById('sendButton');
            const messageInput = document.getElementById('messageInput');
    
            // Agrega un evento al botón para que envíe el mensaje cuando se haga clic
            sendButton.addEventListener('click', function() {
                // Obtiene el contenido del campo de texto
                const message = messageInput.value;
    
                // Envía una solicitud POST a /message
                fetch('/message', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ message: message })
                })
                .then(response => response.json()) // Procesa la respuesta en JSON
                .then(data => {
                    console.log('Respuesta del servidor:', data);
                    alert('Mensaje enviado exitosamente');
                })
                .catch(error => {
                    console.error('Error al enviar el mensaje:', error);
                    alert('Hubo un error al enviar el mensaje');
                });
            });
        </script>
    </article>

</body>

</html>